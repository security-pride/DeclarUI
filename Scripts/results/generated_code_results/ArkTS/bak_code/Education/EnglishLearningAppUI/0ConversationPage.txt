import router from '@ohos.router';

interface ConversationItem {
  speaker: string;
  text: string;
  translation: string;
}

@Entry
@Component
struct ConversationPracticePage {
  @State conversation: ConversationItem[] = [
    { speaker: 'Ellen', text: 'Hey there', translation: 'Xin chào' },
    { speaker: 'Taxi Driver', text: 'Hey,where are you going today?', translation: 'Chào cô, hôm nay cô sẽ đi đâu' },
    { speaker: 'Ellen', text: '25 Gerhold Valley, please.', translation: 'Cho tôi tới 25 Gerhold Valley.' },
    { speaker: 'Taxi Driver', text: 'No problem.', translation: 'Không vấn đề.' }
  ];

  build() {
    Column() {
      Row() {
        Image($r('app.media.template'))
          .width(24)
          .height(24)
          .margin({ right: 16 })
          .onClick(() => {
            router.back();
          })
        Text('When taking a taxi')
          .fontSize(20)
          .fontWeight(FontWeight.Bold)
      }
      .width('100%')
      .justifyContent(FlexAlign.Start)
      .padding({ left: 16, top: 16, bottom: 16 })

      Scroll() {
        Column() {
          ForEach(this.conversation, (item: ConversationItem) => {
            this.ConversationItem(item)
          })
        }
        .width('100%')
        .padding({ left: 16, right: 16 })
      }
      .layoutWeight(1)

      Row() {
        Button('LISTEN')
          .width('45%')
          .height(48)
          .backgroundColor('#4CAF50')
          .fontColor(Color.White)
        Button('SPEAKING')
          .width('45%')
          .height(48)
          .backgroundColor('#2196F3')
          .fontColor(Color.White)
      }
      .width('100%')
      .justifyContent(FlexAlign.SpaceEvenly)
      .padding({ bottom: 16 })
    }
    .width('100%')
    .height('100%')
  }

  @Builder
  ConversationItem(item: ConversationItem) {
    Column() {
      Row() {
        Text(item.speaker)
          .fontSize(16)
          .fontWeight(FontWeight.Bold)
        Image($r('app.media.template'))
          .width(24)
          .height(24)
      }
      .width('100%')
      .justifyContent(FlexAlign.SpaceBetween)
      .margin({ top: 16, bottom: 8 })

      Row() {
        Text(item.text)
          .fontSize(18)
          .margin({ right: 8 })
        Button('REPEAT')
          .height(32)
          .backgroundColor('#E0E0E0')
          .fontColor('#333333')
      }
      .width('100%')
      .justifyContent(FlexAlign.SpaceBetween)
      .margin({ bottom: 8 })

      Text(item.translation)
        .fontSize(16)
        .fontColor('#666666')
        .margin({ bottom: 16 })

      Divider()
        .color('#E0E0E0')
        .height(1)
    }
    .width('100%')
  }
}